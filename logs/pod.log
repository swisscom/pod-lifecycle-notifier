
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.0)

2020-12-08 17:41:24.231  INFO 1 --- [           main] c.swisscom.clouds.PodLifecycleNotifier   : Starting PodLifecycleNotifier using Java 11.0.9 on pod-lifecycle-notifier-pj4cg with PID 1 (/workspace/com.swisscom.clouds.PodLifecycleNotifier started by cnb in /workspace)
2020-12-08 17:41:24.231  INFO 1 --- [           main] c.swisscom.clouds.PodLifecycleNotifier   : No active profile set, falling back to default profiles: default
2020-12-08 17:41:24.295  WARN 1 --- [           main] i.m.c.i.binder.jvm.JvmGcMetrics          : GC notifications will not be available because MemoryPoolMXBeans are not provided by the JVM
2020-12-08 17:41:24.303  INFO 1 --- [           main] c.s.c.services.PodLifecycleProcessor     : Enabled Callbacks: MsTeams, ConsoleLogger
2020-12-08 17:41:24.323  INFO 1 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2020-12-08 17:41:24.354  INFO 1 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port(s): 8080
2020-12-08 17:41:24.355  INFO 1 --- [           main] c.swisscom.clouds.PodLifecycleNotifier   : Started PodLifecycleNotifier in 0.132 seconds (JVM running for 0.136)
2020-12-08 17:41:24.355  INFO 1 --- [           main] ConditionEvaluationReportLoggingListener :

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-08 17:41:24.356 ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed

java.lang.reflect.UndeclaredThrowableException: Failed to invoke event listener method
HandlerMethod details: 
Bean [com.swisscom.clouds.services.PodLifecycleProcessor]
Method [public void com.swisscom.clouds.services.PodLifecycleProcessor.applicationStarted(org.springframework.boot.context.event.ApplicationStartedEvent)]
Resolved arguments: 
[0] [type=org.springframework.boot.context.event.ApplicationStartedEvent] [value=org.springframework.boot.context.event.ApplicationStartedEvent[source=org.springframework.boot.SpringApplication@1779004f]]

	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:329) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:197) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:160) ~[na:na]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:203) ~[na:na]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:196) ~[na:na]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:161) ~[na:na]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:426) ~[na:na]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:383) ~[na:na]
	at org.springframework.boot.context.event.EventPublishingRunListener.started(EventPublishingRunListener.java:105) ~[com.swisscom.clouds.PodLifecycleNotifier:2.4.0]
	at org.springframework.boot.SpringApplicationRunListeners.lambda$started$5(SpringApplicationRunListeners.java:75) ~[na:na]
	at java.util.ArrayList.forEach(ArrayList.java:1541) ~[com.swisscom.clouds.PodLifecycleNotifier:na]
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:117) ~[na:na]
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:111) ~[na:na]
	at org.springframework.boot.SpringApplicationRunListeners.started(SpringApplicationRunListeners.java:75) ~[na:na]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332) ~[na:na]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1309) ~[na:na]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1298) ~[na:na]
	at com.swisscom.clouds.PodLifecycleNotifier.main(PodLifecycleNotifier.java:10) ~[com.swisscom.clouds.PodLifecycleNotifier:na]
Caused by: java.lang.ExceptionInInitializerError: null
	at com.oracle.svm.core.classinitialization.ClassInitializationInfo.initialize(ClassInitializationInfo.java:291) ~[na:na]
	at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect.lambda$subscribe$0(HttpClientConnect.java:211) ~[na:na]
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:57) ~[na:na]
	at reactor.core.publisher.FluxRetryWhen.subscribe(FluxRetryWhen.java:76) ~[na:na]
	at reactor.core.publisher.MonoRetryWhen.subscribeOrReturn(MonoRetryWhen.java:46) ~[na:na]
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[na:na]
	at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect.subscribe(HttpClientConnect.java:263) ~[na:na]
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[na:na]
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[na:na]
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[na:na]
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]
	at reactor.core.publisher.Mono.subscribe(Mono.java:3987) ~[na:na]
	at reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:199) ~[na:na]
	at reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53) ~[na:na]
	at reactor.core.publisher.Mono.subscribe(Mono.java:3972) ~[na:na]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:425) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:270) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:228) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:370) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:164) ~[na:na]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:86) ~[na:na]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8095) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.Flux.subscribeWith(Flux.java:8268) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8065) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:7989) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.Flux.subscribe(Flux.java:7907) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at com.swisscom.clouds.services.PodLifecycleProcessor.applicationStarted(PodLifecycleProcessor.java:34) ~[com.swisscom.clouds.PodLifecycleNotifier:na]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:312) ~[na:na]
	... 17 common frames omitted
Caused by: java.lang.NullPointerException: provider
	at java.util.Objects.requireNonNull(Objects.java:246) ~[na:na]
	at reactor.netty.tcp.SslProvider.addHandlerConfigurator(SslProvider.java:87) ~[na:na]
	at reactor.netty.http.client.HttpClientSecure.<clinit>(HttpClientSecure.java:97) ~[na:na]
	at com.oracle.svm.core.classinitialization.ClassInitializationInfo.invokeClassInitializer(ClassInitializationInfo.java:351) ~[na:na]
	at com.oracle.svm.core.classinitialization.ClassInitializationInfo.initialize(ClassInitializationInfo.java:271) ~[na:na]
	... 45 common frames omitted

2020-12-08 17:41:24.356  WARN 1 --- [           main] onfigReactiveWebServerApplicationContext : Exception thrown from ApplicationListener handling ContextClosedEvent

java.lang.reflect.UndeclaredThrowableException: Failed to invoke event listener method
HandlerMethod details: 
Bean [com.swisscom.clouds.services.PodLifecycleProcessor]
Method [public void com.swisscom.clouds.services.PodLifecycleProcessor.contextClosed(org.springframework.context.event.ContextClosedEvent)]
Resolved arguments: 
[0] [type=org.springframework.context.event.ContextClosedEvent] [value=org.springframework.context.event.ContextClosedEvent[source=org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext@57a46920, started on Tue Dec 08 17:41:24 GMT 2020]]

	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:329) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:197) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:160) ~[na:na]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:203) ~[na:na]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:196) ~[na:na]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:161) ~[na:na]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:426) ~[na:na]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:383) ~[na:na]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1065) ~[na:na]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.doClose(ReactiveWebServerApplicationContext.java:146) ~[na:na]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1028) ~[na:na]
	at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:823) ~[na:na]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:336) ~[na:na]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1309) ~[na:na]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1298) ~[na:na]
	at com.swisscom.clouds.PodLifecycleNotifier.main(PodLifecycleNotifier.java:10) ~[com.swisscom.clouds.PodLifecycleNotifier:na]
Caused by: java.lang.NoClassDefFoundError: Could not initialize class reactor.netty.http.client.HttpClientSecure
	at com.oracle.svm.core.classinitialization.ClassInitializationInfo.initialize(ClassInitializationInfo.java:215) ~[na:na]
	at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect.lambda$subscribe$0(HttpClientConnect.java:211) ~[na:na]
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:57) ~[na:na]
	at reactor.core.publisher.FluxRetryWhen.subscribe(FluxRetryWhen.java:76) ~[na:na]
	at reactor.core.publisher.MonoRetryWhen.subscribeOrReturn(MonoRetryWhen.java:46) ~[na:na]
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[na:na]
	at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect.subscribe(HttpClientConnect.java:263) ~[na:na]
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[na:na]
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[na:na]
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[na:na]
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]
	at reactor.core.publisher.Mono.subscribe(Mono.java:3987) ~[na:na]
	at reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:199) ~[na:na]
	at reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53) ~[na:na]
	at reactor.core.publisher.Mono.subscribe(Mono.java:3972) ~[na:na]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:425) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:270) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:228) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:370) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:164) ~[na:na]
	at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:86) ~[na:na]
	at reactor.core.publisher.Flux.subscribe(Flux.java:8095) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at reactor.core.publisher.Flux.blockLast(Flux.java:2493) ~[com.swisscom.clouds.PodLifecycleNotifier:3.4.0]
	at com.swisscom.clouds.services.PodLifecycleProcessor.contextClosed(PodLifecycleProcessor.java:41) ~[com.swisscom.clouds.PodLifecycleNotifier:na]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:312) ~[na:na]
	... 15 common frames omitted

2020-12-08 17:41:24.356  INFO 1 --- [           main] o.s.b.w.embedded.netty.GracefulShutdown  : Commencing graceful shutdown. Waiting for active requests to complete
2020-12-08 17:41:24.361  INFO 1 --- [ netty-shutdown] o.s.b.w.embedded.netty.GracefulShutdown  : Graceful shutdown complete
